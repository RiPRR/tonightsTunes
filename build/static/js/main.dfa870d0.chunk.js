(this.webpackJsonptonightstunes=this.webpackJsonptonightstunes||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(0),o=a.n(c),r=a(12),s=a.n(r),l=(a(23),a(24),a(4)),i=a.n(l),u=a(13),m=a(6),f=a(2),p=a(5),b=a(10),d=a(14),g=a(15),h=a(17),v=a(16),k=function(e){Object(h.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=Object.values(n.props.suggestions),a=e.currentTarget.value,c=t.filter((function(e){return e.toLowerCase().indexOf(a.toLowerCase())>-1}));n.setState({activeSuggestion:0,filteredSuggestions:c,showSuggestions:!0,userInput:e.currentTarget.value})},n.onClick=function(e){n.setState({activeSuggestion:0,filteredSuggestions:[],showSuggestions:!1,userInput:e.currentTarget.innerText})},n.onKeyDown=function(e){var t=n.state,a=t.activeSuggestion,c=t.filteredSuggestions;if(13===e.keyCode)n.setState({activeSuggestion:0,showSuggestions:!1,userInput:c[a]});else if(38===e.keyCode){if(0===a)return;n.setState({activeSuggestion:a-1})}else if(40===e.keyCode){if(a-1===c.length)return;n.setState({activeSuggestion:a+1})}},n.state={activeSuggestion:0,filteredSuggestions:[],showSuggestions:!1,userInput:""},n}return Object(g.a)(a,[{key:"render",value:function(){var e,t,a=this.onChange,n=this.onClick,r=this.onKeyDown,s=this.state,l=s.activeSuggestion,i=s.filteredSuggestions,u=s.showSuggestions,m=s.userInput;return u&&m&&(t=i.length?o.a.createElement("ul",{className:"suggestions"},i.map((function(e,t){var a;return t===l&&(a="suggestion-active"),o.a.createElement("li",{className:a,key:e,onClick:n},e)}))):o.a.createElement("div",{class:"no-suggestions"})),o.a.createElement(c.Fragment,null,o.a.createElement("input",(e={type:"text",placeholder:"NY",onChange:a,onKeyDown:r,value:m},Object(b.a)(e,"placeholder",""),Object(b.a)(e,"className","stateInput"),e)),o.a.createElement("div",{className:"sug"},t))}}]),a}(c.Component);k.defaultProps={suggestions:[]};var E=function(e){var t=Object(c.useState)(!1),a=Object(n.a)(t,2),r=a[0],s=a[1],l=Object(c.useState)(!0),i=Object(n.a)(l,2),u=i[0],m=i[1],b=function(e){m(!u)},d=function(t){e.handleMouseover(e.index)},g=function(){console.log(r),s(!r)},h=e.primaryColor,v=e.secondaryColor,k=f.a.create({detailColor:{color:e.detailColor},fadeIn:{animationName:p.fadeIn,animationDuration:"1s"},none:{}}),E="fas fa-play fa-2x playBttn",y="fas fa-pause fa-2x pauseBttn";return!0===u?o.a.createElement("div",{className:"track",style:{backgroundColor:h,borderBottom:"solid "+h}},o.a.createElement("div",{className:"albumArt hvr-grow",onClick:g},o.a.createElement("img",{src:e.art,alt:"bah",className:"albumArt",onClick:d}),e.audio?o.a.createElement("i",{onClick:d,style:{color:"#C0C8E2"},className:r?y:E}):null),o.a.createElement("div",{className:"trackInfo",onClick:b,style:{color:v}},o.a.createElement("h4",{className:"trackName"},e.name),o.a.createElement("div",{className:"trackName2"},o.a.createElement("p",{className:"trackArtist"},e.artist),o.a.createElement("p",{className:"trackLength"},e.duration)))):o.a.createElement("div",{className:"track",style:{backgroundColor:h,borderBottom:"solid "+h}},o.a.createElement("div",{className:"albumArt hvr-grow",onClick:g},o.a.createElement("img",{src:e.art,alt:"bah",className:"albumArt",onClick:d}),e.audio?o.a.createElement("i",{onClick:d,style:{color:"#C0C8E2"},className:r?y:E}):null),o.a.createElement("div",{className:"eventInfo",onClick:b,style:{color:v}},o.a.createElement("p",{className:"info overflow"},o.a.createElement("a",{style:{color:e.detailColor},target:"_blank",href:e.link,className:"eventlink"},o.a.createElement("b",{className:Object(f.b)(k.detailColor)},e.artist)," @ ",o.a.createElement("b",{className:Object(f.b)(k.detailColor)},e.venue))),o.a.createElement("p",{className:"info overflow"},o.a.createElement("b",{className:Object(f.b)(k.detailColor)},e.date)," in ",o.a.createElement("b",{className:Object(f.b)(k.detailColor)},e.location))))},y=function(e){var t=Object(c.useState)("0px"),a=Object(n.a)(t,2),r=a[0],s=a[1],l=Object(c.useState)(null),i=Object(n.a)(l,2),u=i[0],m=i[1],p=Object(c.useState)("settings"),b=Object(n.a)(p,2),d=b[0],g=b[1];Object(c.useEffect)((function(){m(e.location)}),[]);var h=f.a.create({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",marginBottom:"20px",maxWidth:"500px"},settings:{maxHeight:r,overflow:"hidden",transition:"all 3s ease",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",backgroundColor:"#63585E",borderRadius:"20px"},filter:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",fontFamily:"Roboto",color:"#C0C8E2",letterSpacing:"5px"},shuffle:{fontFamily:"Roboto",fontWeight:"bold",color:"#63585E",borderRadius:"10px",fontSize:"20pt",letterSpacing:"2px",marginBottom:"20px",marginTop:"20px",backgroundColor:"#C0C8E2",outline:"none"},select:{fontFamily:"Roboto",borderRadius:"2px",marginLeft:"10px",backgroundColor:"#C0C8E2",color:"#63585E",fontWeight:"bold",fontSize:"17pt",textAlign:"center"},where:{fontFamily:"Roboto",borderRadius:"2px",marginLeft:"10px",backgroundColor:"#C0C8E2",color:"#63585E",fontWeight:"bold",fontSize:"17pt",textAlign:"center",width:"200px"},count:{fontFamily:"Roboto",borderRadius:"2px",marginLeft:"5px",marginRight:"8px",backgroundColor:"#C0C8E2",color:"#63585E",fontWeight:"bold",fontSize:"17pt",textAlign:"center",width:"45px"},iconDiv:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"80%"},instList:{fontFamily:"Roboto",color:"#C0C8E2"},extList:{fontFamily:"Roboto",color:"#DF2935"},li:{marginBottom:"8px",fontSize:"13pt"},emphasis:{color:"white"},howTo:{fontFamily:"Roboto",color:"#C0C8E2"}}),v=function(e){var t=e.target.getAttribute("name");d!==t?(s("0px"),setTimeout((function(){g(t),s("500px")}),2500)):(g(t),s("0px"===r?"500px":"0px"))},k=function(){e.shuffle(u)};return"settings"==d?o.a.createElement("div",{className:Object(f.b)(h.container)},o.a.createElement("div",{className:Object(f.b)(h.iconDiv)},o.a.createElement("i",{className:"fas fa-sync-alt fa-2x settingsIco",onClick:k}),o.a.createElement("i",{className:"fas fa-cog fa-2x settingsIco",name:"settings",onClick:v}),o.a.createElement("i",{className:"fas fa-question-circle fa-2x settingsIco",name:"info",onClick:v})),o.a.createElement("div",{className:Object(f.b)(h.settings)},o.a.createElement("div",{className:Object(f.b)(h.filter)},o.a.createElement("h2",null,"sort by?"),o.a.createElement("select",{onChange:function(t){e.changeSort(t)},className:Object(f.b)(h.select)},o.a.createElement("option",null,"nothing"),o.a.createElement("option",null,"popularity"),o.a.createElement("option",null,"date"))),o.a.createElement("div",{className:Object(f.b)(h.filter)},o.a.createElement("h2",null,"when?"),o.a.createElement("select",{onChange:function(t){e.changeTime(t)},className:Object(f.b)(h.select)},o.a.createElement("option",null,"tonight"),o.a.createElement("option",null,"this week"))),o.a.createElement("div",{className:Object(f.b)(h.filter)},o.a.createElement("h2",null,"how many?"),o.a.createElement("input",{className:Object(f.b)(h.count),placeholder:e.size,onChange:function(t){e.updateSize(t.target.value)},onKeyDown:function(){return!1},type:"number",min:"1",max:"50"})),o.a.createElement("div",{className:"filterBttnDiv"},o.a.createElement("button",{className:"goBackBttn2",onClick:e.goBack},"go back"),o.a.createElement("button",{onClick:k,className:Object(f.b)(h.shuffle)},"apply filters")))):o.a.createElement("div",{className:Object(f.b)(h.container)},o.a.createElement("div",{className:Object(f.b)(h.iconDiv)},o.a.createElement("i",{className:"fas fa-sync-alt fa-2x settingsIco",onClick:k}),o.a.createElement("i",{className:"fas fa-cog fa-2x settingsIco",name:"settings",onClick:v}),o.a.createElement("i",{className:"fas fa-question-circle fa-2x settingsIco",name:"info",onClick:v})),o.a.createElement("div",{className:Object(f.b)(h.settings)},o.a.createElement("h2",{className:Object(f.b)(h.howTo)},"HOW TO USE"),o.a.createElement("ul",{className:Object(f.b)(h.instList)},o.a.createElement("li",{className:Object(f.b)(h.li)},"click ",o.a.createElement("i",{className:Object(f.b)(h.emphasis)},"right side")," of track to toggle between event & track info"),o.a.createElement("li",{className:Object(f.b)(h.li)},"click ",o.a.createElement("i",{className:Object(f.b)(h.emphasis)},"album art")," to play a sample of the track"),o.a.createElement("li",{className:Object(f.b)(h.li)},"connecting to spotify is strongly reccomended as it will allow you to save the playlist along with access to future features")),o.a.createElement("ul",{className:Object(f.b)(h.extList)},o.a.createElement("li",null,"Due to COVID-19 many, if not all events and concerts have been canceled. In order to maintain functionality, canceled events have been temporarily allowed in the results."))))},j=function(e){var t=function(){var t=Object(m.a)(i.a.mark((function t(){var a,n,c,o,r,s,l,u,m,f,p,b,d,g;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.token,console.log(e.uris),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},c={name:"Music near __ + date",public:!1,description:"a playlist generated by Whip!"},o={uris:e.uris},r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(c)},s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(o)},t.next=9,fetch("https://api.spotify.com/v1/me",n);case 9:return l=t.sent,t.next=12,l.json();case 12:return u=t.sent,m=u.id,t.next=16,fetch("https://api.spotify.com/v1/users/".concat(m,"/playlists"),r);case 16:return f=t.sent,t.next=19,f.json();case 19:return p=t.sent,console.log(p),e.setAdded(p.external_urls.spotify),b=p.id,t.next=25,fetch("https://api.spotify.com/v1/playlists/".concat(b,"/tracks"),s);case 25:return d=t.sent,t.next=28,d.json();case 28:g=t.sent,console.log(g);case 30:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o.a.createElement("h3",{className:"connectBttn",onClick:t},o.a.createElement("img",{className:"spotifyico",src:"/spotifyico.png"}),"add playlist to spotify")},N=f.a.create({nothing:{},bounceOutLeft:{animationName:p.bounceOutLeft,animationDuration:"1s"},jello:{animationName:p.jello,animationDuration:"1s",fontFamily:"Roboto",color:"#C0C8E2",padding:"5px"}}),O=function(e){var t=Object(c.useState)(null),a=Object(n.a)(t,2),r=a[0],s=a[1],l=Object(c.useState)(!0),p=Object(n.a)(l,2),b=p[0],d=p[1],g=Object(c.useState)([]),h=Object(n.a)(g,2),v=h[0],k=h[1],O=Object(c.useState)(new Audio),C=Object(n.a)(O,1)[0],x=Object(c.useState)(-1),S=Object(n.a)(x,2),w=S[0],T=S[1],D=Object(c.useState)(!1),I=Object(n.a)(D,2),B=I[0],A=I[1],L=Object(c.useState)(null),R=Object(n.a)(L,2),z=R[0],F=R[1],_=Object(c.useState)("random"),M=Object(n.a)(_,2),W=M[0],J=M[1],K=Object(c.useState)("day"),P=Object(n.a)(K,2),H=P[0],Y=P[1],q=Object(c.useState)(20),U=Object(n.a)(q,2),G=U[0],V=U[1],Q=Object(c.useState)(!1),X=Object(n.a)(Q,2),Z=X[0],$=X[1],ee=Object(c.useState)([]),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],ce=Object(c.useState)(!1),oe=Object(n.a)(ce,2),re=oe[0],se=oe[1],le=function(t){A(!0);var a={token:e.token,location:t,span:H},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};fetch("http://localhost:3001/nearby",n).then((function(e){return e.json()})).then((function(e){return ie(e)}))},ie=function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n,c,o,r,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.err){e.next=6;break}$(!0),d(!0),A(!1),e.next=37;break;case 6:$(!1),a=[],n=[],c=0,console.log(G),console.log(c),o=Ee(t.events),r=Object(u.a)(o),e.prev=14,r.s();case 16:if((s=r.n()).done){e.next=24;break}if(l=s.value,c!==G){e.next=21;break}return console.log("broke"),e.abrupt("break",24);case 21:l.tracks&&l.tracks[0]&&(c+=1,l.tracks[0].duration=ve(l.tracks[0].duration),a.push({track:l.tracks[0],event:l.event}),n.push(l.tracks[0].uri));case 22:e.next=16;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(14),r.e(e.t0);case 29:return e.prev=29,r.f(),e.finish(29);case 32:return ne(n),e.next=35,de(a);case 35:a=e.sent,k(a);case 37:case"end":return e.stop()}}),e,null,[[14,26,29,32]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(e,t){var a=e.track.popularity+e.event.popularity;return t.track.popularity+t.event.popularity-a},me=function(e,t){return new Date(e.event.date)-new Date(t.event.date)},fe=function(e){J(e.target.value)},pe=function(e){var t=e.target.value;Y("tonight"===t?"day":"week")},be=function(e){e=Number(e),V(e<50&&e>=1?e:20)},de=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),se(!1),a=t||v,"popularity"===W?a.sort(ue):"date"===W&&a.sort(me),t||k(a),setTimeout((function(){A(!1),J("random")}),500),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(e){if(e===w)C.pause(),T(-1);else{var t=v[e].track.audio;null===t?C.pause():(C.src=t,C.play()),T(e)}},he=function(){d(!0),V(20)},ve=function(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a},ke=function(e,t,a){return"#"+[e,t,a].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("")};function Ee(e){var t,a,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),a=e[n],e[n]=e[t],e[t]=a;return e}function ye(e){var t=new Date(e),a=t.getHours(),n=t.getMinutes(),c=a>=12?"pm":"am",o=(a=(a%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+c;return t.getMonth()+1+"/"+t.getDate()+" @ "+o}Object(f.b)(r?N.bounceOutLeft:N.nothing);var je=function(){return o.a.createElement("div",{className:"noTracksDiv"},o.a.createElement("h1",{className:"noTracksMsg"},"no tracks found \ud83d\ude14"),o.a.createElement("button",{className:"goBackBttn",onClick:he},"go back"))},Ne=function(){return o.a.createElement("div",{className:"tracks"},v.map((function(e,t){return o.a.createElement(E,{key:t,index:t,artist:e.track.artist,name:e.track.name,link:e.event.link,uri:e.track.uri,duration:e.track.duration,art:e.track.art,selected:t===w,handleMouseover:ge,audio:e.track.audio,venue:e.event.venue?e.event.venue.name:"?",venueLink:e.event.venue?e.event.venue.link:"/",date:e.event.date?ye(e.event.date):"unknown date",location:e.event.location,primaryColor:ke(e.track.colors[0][0],e.track.colors[0][1],e.track.colors[0][2]),secondaryColor:ke(e.track.colors[1][0],e.track.colors[1][1],e.track.colors[1][2]),detailColor:ke(e.track.colors[2][0],e.track.colors[2][1],e.track.colors[2][2])})})))};return b?o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"locationDiv"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s("bounceOutLeft"),d(!1),setTimeout((function(){s(null)}),900),F(e.target[0].value),le(e.target[0].value)},className:"timmy"},o.a.createElement("input",{className:"cityInput",placeholder:"enter a city",suggestions:{7644:"New York",N2393:"New Yam"}}),o.a.createElement("h3",{className:Object(f.b)(N.jello)},Z?"\ud83e\udd14city not found, try again\ud83e\udd14":null))),o.a.createElement("h4",{className:"footer"},"\xa92020 Ryan Rivera ")):!B&&re?o.a.createElement("div",{className:"trackContainer"},o.a.createElement("a",{className:"playlistLink",href:re,target:"_blank"},o.a.createElement("h3",{className:"added"},"\ud83c\udf89 playlist added here \ud83c\udf89")),o.a.createElement(y,{goBack:he,updateSize:be,size:G,location:z,changeTime:pe,changeSort:fe,shuffle:le}),v.length?null:je(),B?null:Ne()):B?o.a.createElement("div",{className:"loading"},o.a.createElement("i",{style:{color:"#63585E"},className:"fas fa-circle-notch fa-spin fa-2x"})):o.a.createElement("div",{className:"trackContainer"},e.accessToken?o.a.createElement(j,{setAdded:function(e){se(e)},uris:ae,token:e.accessToken}):null,o.a.createElement(y,{goBack:he,updateSize:be,size:G,location:z,changeTime:pe,changeSort:fe,shuffle:le}),v.length?null:je(),B?null:Ne())},C=function(e){var t=e.accessToken?"auto":"pointer";return o.a.createElement("div",{className:"heading"},o.a.createElement("h1",{className:"title"},"Whip"),o.a.createElement("h3",{className:"subTitle"},"A playlist generator based on music near you"),o.a.createElement("div",{className:"pwrDiv"},o.a.createElement("img",{className:"songkickLogo",src:"/songkicklogo.png"}),o.a.createElement("div",{className:"connectDiv"},o.a.createElement("a",{href:e.accessToken?null:e.link,className:"authLink"},o.a.createElement("h2",{className:"spotifyBttn",style:{cursor:t}}," ",o.a.createElement("img",{className:"spotifyico",src:"/spotifyico.png"}),e.accessToken?"\u2705":"connect spotify")))))},x=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});window.location.hash="";var S=x,w=function(e){var t=Object(c.useState)(null),a=Object(n.a)(t,2),r=a[0],s=a[1],l=Object(c.useState)(null),i=Object(n.a)(l,2),u=i[0],m=i[1];Object(c.useEffect)((function(){fetch("http://localhost:3001/token").then((function(e){return e.json()})).then((function(e){return s(e.token)}))}),[]),Object(c.useEffect)((function(){var e=S.access_token;e&&(m(e),console.log(e))}),[]);var f="https://accounts.spotify.com/authorize?client_id=".concat("2a1e4b30a72b41feb5c432aed9877ccb","&response_type=token&redirect_uri=").concat("http%3A%2F%2Flocalhost%3A3000","&scope=").concat("playlist-modify-private","&show_dialog=true");return o.a.createElement("div",{className:"app"},o.a.createElement(C,{accessToken:u,link:f}),o.a.createElement(O,{accessToken:u,token:r}))};s.a.render(o.a.createElement(w,null),document.getElementById("root"))},18:function(e,t,a){e.exports=a(105)},23:function(e,t,a){},24:function(e,t,a){}},[[18,1,2]]]);
//# sourceMappingURL=main.dfa870d0.chunk.js.map